<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Dr Sanna</title>
    <link rel="preload" href="/icones/arrow-left-solid.svg" as="image">
           <style>
  #loader {
  transition: all 0.3s ease-out;
  opacity: 1;
  visibility: visible;
  position: fixed;
  height: 100vh;
  width: 100vw;
  background: black;
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}

#loader.fadeOut {
  opacity: 0;
  visibility: hidden;
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

body {
  font-family: Arial, sans-serif;
  display: flex;
background: dimgray
}

#title-container {
  width: 33.33%;
  max-height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  color: white;
}

#table-container {
  width: 66.67%;
  max-height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  padding: 50px;
}

table {
  border-collapse: separate;
  width: 100%;
  height: 100%;
}

td {
  background-color: seashell;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  z-index: 0;
}

.cell-content {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  word-wrap: break-word;
  font-weight: bold;
  color: black;
  transition: none;
}

.square-cell {
  width: calc(100% - 20px);
  height: calc(100% - 20px);
  padding: 10px;
  position: relative;
}

.square-cell .cell-content {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

#title-container td {
  border: 1px solid black;
  background-color: seashell;
  color: white;
}

#title-container tr:first-child .cell-content {
  font-size: 1.2em;
  font-family: "Arial Black", Arial, sans-serif;
}

#table-container > table {
  border-collapse: separate;
  width: 100%;
  height: 100%;
}

#table-container td {
  position: relative;
  z-index: 0;
  border: 2px solid black;
}

#table-container td:hover {
  cursor: pointer;
  transform: scale(1.2) translateZ(0);
  border: 2px solid black;
  border-radius: 25px;
  outline: 5px solid indianred;;
  z-index: 1;
  background-color: seashell;
}

#table-container tr .cell-content {
  font-size: 15px;
  text-transform: none;
  font-family: Arial, sans-serif;
}

.cell-content a {
  text-decoration: none;
  color: inherit;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cell-content a:hover {
  background-color: transparent;
}

.arrow-left-icon {
  width: 8em;
  height: 8em; 
}
</style>
</head>
<body>
        <div id="loader">
       <img src="https://i.giphy.com/media/Rk3PlFCDTXAKBjWUvR/giphy.webp" alt="Loading...">
    </div>
    <div id="title-container">
        <table>
        <tr>
            <td style="height: 33.33%;">
                <div id="dr-sanna-cell" class="cell-content">DR SANNA'S COURSES TOOL</div>
            </td>
        </tr>
            <tr>
                <td style="height: 66.67%;"><div class="cell-content"></div></td>
            </tr>
        </table>
    </div>
    <div id="table-container">
        <table>
            <tr>
                <td class="square-cell" id="cell-1"><div class="cell-content"><span class="content-text">SCIENCES FONDAMENTALES</span></div></td>
                <td class="square-cell" id="cell-2"><div class="cell-content"><span class="content-text">MOCO</span></div></td>
                <td class="square-cell" id="cell-3"><div class="cell-content"><span class="content-text">PARO/IMPLANTO</span></div></td>
            </tr>
            <tr>
                <td class="square-cell" id="cell-4"><div class="cell-content">OC</div></td>
                <td class="square-cell" id="cell-5"><div class="cell-content">ENDODONTIE</div></td>
                <td class="square-cell" id="cell-6"><div class="cell-content">PROTHESES</div></td>
            </tr>
            <tr>
                <td class="square-cell" id="cell-7"><div class="cell-content">PEDO</div></td>
                <td class="square-cell" id="cell-8"><div class="cell-content">ODONTOLOGIE SPECIFIQUE</div></td>
                <td class="square-cell" id="cell-9"><div class="cell-content">Ressources utiles</div></td>
            </tr>
        </table>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
  let initialContent = {}; // Object to store initial content
  let isBack = false; // State to track if back button was clicked
  let menuTitles = {}; // Object to store menu titles
  let initialTitle = $('#dr-sanna-cell').text(); // Store the initial title

  // AJAX request to get the menu data
  $.getJSON("/data/MainMenu.json", function(data) {
    const cellDataMap = {};
    data.forEach(item => {
      cellDataMap[item['1']] = item;
    });

    // Save initial content from MainMenu in JSON
    initialContent = cellDataMap["MainMenu"];

    // AJAX request to get the titles data
    $.getJSON("/data/title.json", function(data) {
      // Iterate over properties of the first object in data
      for (let key in data[0]) {
        // key to match 'cell-' keys in cellDataMap
        menuTitles['cell-' + key] = data[0][key];
      };

      for (let i = 1; i <= 10; i++) {
        $('#cell-' + i).click(function(){
          // If the first cell was clicked and we are in a submenu, restore the initial content
          if (isBack && i === 1) {
            updateCells(initialContent);
            $('#dr-sanna-cell').text(initialTitle); // Use the initial title here
            isBack = false; // Reset the isBack state
          } else if (!isBack) { // Only switch to submenu when not already in a submenu
            const cellData = cellDataMap['cell-' + i];
            updateCells(cellData);
            // Update dr-sanna-cell text with corresponding title from menuTitles
            $('#dr-sanna-cell').text(menuTitles['cell-' + i]);
            isBack = true; // Set the isBack state after displaying submenu
          }
        });
      }
    });
  });

  function updateCells(cellData) {
    for (let j = 1; j <= 10; j++) {
      // Clear all cells before updating
      $('#cell-' + j + ' .cell-content').empty();
    }
    for (let j = 1; j <= 10; j++) {
      const cellContentElement = $('#cell-' + j + ' .cell-content');
      const cellDataItem = cellData[j + 1];
      if (cellDataItem) { // only update when cellDataItem is not null
        if (typeof cellDataItem === 'object' && cellDataItem.hasOwnProperty('text') && cellDataItem.hasOwnProperty('link')) {
          // Create new hyperlink element
          const link = $('<a>').addClass('no-underline').attr({
            'href': cellDataItem.link,
            'target': '_blank'
          }).text(cellDataItem.text);
          // Empty the cell and append the link
          cellContentElement.empty().append(link);
        } else if (cellDataItem === '/icones/arrow-left-solid.svg') {
          // Create new icon element
          const icon = $('<img>').attr('src', '/icones/arrow-left-solid.svg').addClass('arrow-left-icon');
          // Empty the cell and append the icon
          cellContentElement.empty().append(icon);
        } else {
          cellContentElement.text(cellDataItem);
        }
      }
    }
  }
});
</script>

     <script>
$(window).on("load", function() {
    if ('fonts' in document) {
        Promise.all([
            document.fonts.load('1em Arial Black')
        ]).then(function () {
            $("#loader").fadeOut("slow");
        });
    } else {
        // Fallback for browsers that do not support the font loading API
        $("#loader").fadeOut("slow");
    }
});
    </script>
</body>
</html>
